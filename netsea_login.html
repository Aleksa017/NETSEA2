<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accedi ‚Äî NetSea</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --ink:   #04111e; --deep:  #071e33; --ocean: #0b3d5e;
      --mid:   #1267a0; --wave:  #1b9fd4; --foam:  #72d7f0;
      --pearl: #e8f6fc; --coral: #e05a3a; --kelp:  #2cb89b;
      --text:  #c5e4f5; --muted: #5d9ab8;
      --ease:  cubic-bezier(.25,.46,.45,.94);
    }
    html, body { height: 100%; }
    body {
      font-family: 'Outfit', sans-serif;
      background: var(--ink); color: var(--text);
      min-height: 100vh; cursor: none;
      display: flex; flex-direction: column;
    }

    /* CURSOR */
    .cursor { width:10px;height:10px;background:var(--foam);border-radius:50%;position:fixed;top:0;left:0;pointer-events:none;z-index:9999;transform:translate(-50%,-50%);mix-blend-mode:screen; }
    .cursor-ring { width:32px;height:32px;border:1.5px solid rgba(114,215,240,.4);border-radius:50%;position:fixed;top:0;left:0;pointer-events:none;z-index:9998;transform:translate(-50%,-50%);transition:transform .1s; }

    /* NAV */
    nav {
      height: 64px; display: flex; align-items: center;
      padding: 0 2.5rem; gap: 1rem;
      background: rgba(4,17,30,.95);
      border-bottom: 1px solid rgba(114,215,240,.08);
      flex-shrink: 0;
    }
    .nav-logo {
      display:flex;align-items:center;gap:.6rem;text-decoration:none;
      font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:600;color:var(--pearl);
    }
    .nav-logo svg { width:32px;height:32px; }
    .nav-back {
      margin-left:auto;display:flex;align-items:center;gap:.5rem;
      color:var(--muted);text-decoration:none;font-size:.875rem;
      transition:color .2s;
    }
    .nav-back:hover { color:var(--foam); }

    /* LAYOUT */
    .page {
      flex:1;display:grid;grid-template-columns:1fr 1fr;
      min-height: calc(100vh - 64px);
    }

    /* LEFT PANEL ‚Äî decorative */
    .left-panel {
      background: linear-gradient(160deg, #041828 0%, #0a3a5a 40%, #062040 100%);
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      padding: 4rem; position: relative; overflow: hidden;
    }
    .left-panel::before {
      content:'';position:absolute;inset:0;
      background: radial-gradient(ellipse 70% 60% at 50% 40%, rgba(27,159,212,.18) 0%, transparent 70%);
    }
    .ocean-art {
      position: relative; z-index: 1; text-align: center;
    }
    .ocean-art .big-icon {
      font-size: 6rem; display: block; margin-bottom: 1.5rem;
      animation: float 5s ease-in-out infinite;
    }
    @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-14px)} }
    .ocean-art h2 {
      font-family:'Cormorant Garamond',serif;font-size:2.2rem;
      color:var(--pearl);font-weight:400;line-height:1.2;margin-bottom:1rem;
    }
    .ocean-art h2 em { font-style:italic;color:var(--foam); }
    .ocean-art p { color:var(--muted);font-size:.95rem;line-height:1.7;max-width:340px;margin:0 auto; }
    .bubbles { position:absolute;inset:0;pointer-events:none;overflow:hidden; }
    .bubble {
      position:absolute;border-radius:50%;
      background:rgba(114,215,240,.08);border:1px solid rgba(114,215,240,.15);
      animation:rise linear infinite;
    }
    @keyframes rise { from{transform:translateY(100vh) scale(0);opacity:0} 20%{opacity:1} to{transform:translateY(-10vh) scale(1.2);opacity:0} }

    /* RIGHT PANEL ‚Äî form */
    .right-panel {
      display: flex; align-items: center; justify-content: center;
      padding: 3rem 2rem;
      background: rgba(7,30,51,.2);
    }
    .form-card {
      width: 100%; max-width: 420px;
    }
    .form-card-header { margin-bottom: 2rem; }
    .form-card-header .eyebrow {
      font-size:.75rem;letter-spacing:.12em;text-transform:uppercase;
      color:var(--wave);margin-bottom:.5rem;
    }
    .form-card-header h1 {
      font-family:'Cormorant Garamond',serif;font-size:2rem;
      color:var(--pearl);font-weight:400;margin-bottom:.4rem;
    }
    .form-card-header p { color:var(--muted);font-size:.875rem; }

    /* FORM ELEMENTS */
    .form-group { margin-bottom:1.1rem; }
    .form-group label {
      display:block;font-size:.8rem;font-weight:500;
      color:var(--muted);margin-bottom:.45rem;letter-spacing:.02em;
    }
    .input-wrap { position:relative; }
    .input-icon {
      position:absolute;left:.9rem;top:50%;transform:translateY(-50%);
      font-size:.95rem;pointer-events:none;
    }
    input[type=text],input[type=email],input[type=password] {
      width:100%;
      background:rgba(11,61,94,.3);
      border:1px solid rgba(114,215,240,.15);
      border-radius:10px;
      padding:.7rem 1rem .7rem 2.6rem;
      color:var(--pearl);
      font-family:'Outfit',sans-serif;font-size:.9rem;
      outline:none;
      transition:border-color .2s,background .2s,box-shadow .2s;
    }
    input::placeholder { color:var(--muted); }
    input:focus {
      border-color:var(--wave);
      background:rgba(11,61,94,.5);
      box-shadow:0 0 0 3px rgba(27,159,212,.12);
    }
    input.err { border-color:var(--coral); box-shadow:0 0 0 3px rgba(224,90,58,.1); }

    .pw-toggle {
      position:absolute;right:.9rem;top:50%;transform:translateY(-50%);
      background:none;border:none;color:var(--muted);cursor:pointer;
      font-size:.9rem;padding:.2rem;
      transition:color .2s;
    }
    .pw-toggle:hover { color:var(--foam); }

    .field-error {
      font-size:.75rem;color:#e8836a;margin-top:.35rem;display:none;
    }

    /* REMEMBER + FORGOT */
    .form-row {
      display:flex;justify-content:space-between;align-items:center;
      margin-bottom:1.25rem;
    }
    .checkbox-wrap {
      display:flex;align-items:center;gap:.5rem;
      font-size:.82rem;color:var(--muted);cursor:pointer;
    }
    .checkbox-wrap input { width:auto;padding:0; }
    .forgot { font-size:.82rem;color:var(--wave);text-decoration:none;transition:color .2s; }
    .forgot:hover { color:var(--foam); }

    /* SUBMIT */
    .btn-submit {
      width:100%;padding:.85rem;border-radius:10px;
      background:var(--wave);color:var(--ink);
      font-family:'Outfit',sans-serif;font-weight:600;font-size:1rem;
      border:none;cursor:pointer;
      transition:background .2s,transform .15s,box-shadow .2s;
      display:flex;align-items:center;justify-content:center;gap:.6rem;
    }
    .btn-submit:hover { background:var(--foam);transform:translateY(-1px);box-shadow:0 8px 24px rgba(27,159,212,.25); }
    .btn-submit:active { transform:translateY(0); }
    .btn-submit.loading { opacity:.7;pointer-events:none; }
    .spinner {
      width:18px;height:18px;border:2px solid rgba(4,17,30,.3);
      border-top-color:var(--ink);border-radius:50%;
      animation:spin .7s linear infinite;display:none;
    }
    @keyframes spin { to{transform:rotate(360deg)} }

    /* DIVIDER */
    .divider {
      display:flex;align-items:center;gap:.75rem;
      margin:1.5rem 0;color:var(--muted);font-size:.78rem;
    }
    .divider::before,.divider::after {
      content:'';flex:1;height:1px;background:rgba(114,215,240,.1);
    }

    /* ALERT */
    .alert {
      padding:.8rem 1rem;border-radius:8px;font-size:.85rem;
      margin-bottom:1rem;display:none;
    }
    .alert-err { background:rgba(224,90,58,.1);border:1px solid rgba(224,90,58,.25);color:#e8836a; }
    .alert-ok { background:rgba(44,184,155,.1);border:1px solid rgba(44,184,155,.25);color:var(--kelp); }

    /* BOTTOM LINK */
    .bottom-link {
      text-align:center;margin-top:1.5rem;
      font-size:.875rem;color:var(--muted);
    }
    .bottom-link a { color:var(--wave);text-decoration:none;font-weight:500;transition:color .2s; }
    .bottom-link a:hover { color:var(--foam); }

    /* DEMO PILL */
    .demo-pill {
      background:rgba(27,159,212,.07);border:1px solid rgba(27,159,212,.15);
      border-radius:8px;padding:.85rem 1rem;font-size:.78rem;color:var(--muted);
      margin-top:1.5rem;line-height:1.6;
    }
    .demo-pill strong { color:var(--wave); }
    .demo-pill code {
      background:rgba(114,215,240,.1);border-radius:4px;
      padding:.1rem .4rem;color:var(--foam);font-size:.75rem;
    }
    .demo-account {
      display:inline-block;cursor:pointer;color:var(--wave);text-decoration:underline;
      text-underline-offset:2px;font-size:.78rem;margin-right:.5rem;
    }
    .demo-account:hover { color:var(--foam); }

    /* RESEARCHER BADGE */
    .researcher-cta {
      background:linear-gradient(135deg,rgba(44,184,155,.08),rgba(27,159,212,.06));
      border:1px solid rgba(44,184,155,.2);border-radius:10px;
      padding:1rem;margin-top:1.25rem;
      display:flex;align-items:center;gap:.85rem;
      text-decoration:none;transition:border-color .2s,background .2s;
    }
    .researcher-cta:hover { border-color:rgba(44,184,155,.4);background:rgba(44,184,155,.1); }
    .researcher-cta .rc-icon { font-size:1.5rem;flex-shrink:0; }
    .researcher-cta .rc-text h4 { color:var(--kelp);font-size:.85rem;font-weight:600;margin-bottom:.15rem; }
    .researcher-cta .rc-text p { color:var(--muted);font-size:.75rem;line-height:1.4; }

    @media(max-width:768px) {
      .page { grid-template-columns:1fr; }
      .left-panel { display:none; }
    }
  </style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>

<!-- NAV -->
<nav>
  <a href="index.php" class="nav-logo">
    <svg viewBox="0 0 40 40" fill="none">
      <circle cx="20" cy="20" r="18" fill="rgba(27,159,212,.15)" stroke="rgba(114,215,240,.3)" stroke-width="1"/>
      <path d="M8 22 Q12 16 16 22 Q20 28 24 22 Q28 16 32 22" stroke="#72d7f0" stroke-width="2" fill="none" stroke-linecap="round"/>
    </svg>
    NetSea
  </a>
  <a href="index.php" class="nav-back">‚Üê Torna alla home</a>
</nav>

<div class="page">

  <!-- LEFT PANEL -->
  <div class="left-panel">
    <div class="bubbles" id="bubbles"></div>
    <div class="ocean-art">
      <span class="big-icon">üåä</span>
      <h2>Esplora gli abissi<br>del <em>nostro mare</em></h2>
      <p>Accedi al tuo account NetSea per il feed personalizzato, le donazioni e ‚Äî se sei un ricercatore verificato ‚Äî per pubblicare contenuti scientifici.</p>
    </div>
  </div>

  <!-- RIGHT PANEL -->
  <div class="right-panel">
    <div class="form-card">

      <div class="form-card-header">
        <p class="eyebrow">üîê Area riservata</p>
        <h1>Bentornato</h1>
        <p>Accedi al tuo account NetSea</p>
      </div>

      <div class="alert alert-err" id="alertErr">‚ùå Credenziali errate. Riprova.</div>
      <div class="alert alert-ok" id="alertOk">‚úÖ Accesso effettuato! Reindirizzamento‚Ä¶</div>

      <!-- PHP: action="login.php" method="POST" -->
      <form id="loginForm" onsubmit="handleLogin(event)" novalidate>

        <!-- EMAIL / USERNAME -->
        <div class="form-group">
          <label for="email">Email o Username</label>
          <div class="input-wrap">
            <span class="input-icon">‚úâÔ∏è</span>
            <input type="text" id="email" name="email"
                   placeholder="mario.rossi@esempio.it" autocomplete="email" required>
          </div>
          <p class="field-error" id="err-email">Campo obbligatorio</p>
        </div>

        <!-- PASSWORD -->
        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-wrap">
            <span class="input-icon">üîí</span>
            <input type="password" id="password" name="password"
                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required>
            <button type="button" class="pw-toggle" onclick="togglePw('password', this)">üëÅ</button>
          </div>
          <p class="field-error" id="err-password">Campo obbligatorio</p>
        </div>

        <!-- REMEMBER + FORGOT -->
        <div class="form-row">
          <label class="checkbox-wrap">
            <input type="checkbox" name="ricordami" id="ricordami">
            Ricordami
          </label>
          <a href="reset_password.php" class="forgot">Password dimenticata?</a>
        </div>

        <!-- SUBMIT -->
        <button type="submit" class="btn-submit" id="submitBtn">
          <span id="btnText">Accedi</span>
          <div class="spinner" id="spinner"></div>
        </button>

      </form>

      <div class="divider">oppure</div>

      <div class="bottom-link">
        Non hai un account? <a href="register.php">Registrati gratis</a>
      </div>

      <a href="register.php?tipo=ricercatore" class="researcher-cta">
        <span class="rc-icon">üî¨</span>
        <div class="rc-text">
          <h4>Sei un ricercatore?</h4>
          <p>Richiedi l'accesso verificato per pubblicare news e contenuti scientifici</p>
        </div>
      </a>

      <!-- DEMO ACCOUNTS -->
      <div class="demo-pill">
        <strong>üß™ Account demo:</strong><br>
        <span class="demo-account" onclick="fillDemo('user@demo.it','demo')">Utente</span>
        <span class="demo-account" onclick="fillDemo('ricerca@demo.it','demo')">Ricercatore</span>
        <span class="demo-account" onclick="fillDemo('admin@demo.it','demo')">Admin</span>
        <br><small>password: <code>demo</code></small>
      </div>

    </div>
  </div>
</div>

<script>
/* CURSOR */
const cursor=document.getElementById('cursor'),ring=document.getElementById('cursorRing');
let mx=0,my=0,rx=0,ry=0;
document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;cursor.style.cssText=`left:${mx}px;top:${my}px`;});
(function loop(){rx+=(mx-rx)*.12;ry+=(my-ry)*.12;ring.style.cssText=`left:${rx}px;top:${ry}px`;requestAnimationFrame(loop);})();

/* BUBBLES */
const bc=document.getElementById('bubbles');
for(let i=0;i<14;i++){
  const b=document.createElement('div');
  const s=Math.random()*60+20;
  b.className='bubble';
  b.style.cssText=`width:${s}px;height:${s}px;left:${Math.random()*100}%;bottom:-${s}px;animation-duration:${Math.random()*12+8}s;animation-delay:${Math.random()*10}s`;
  bc.appendChild(b);
}

/* PASSWORD TOGGLE */
function togglePw(id,btn){
  const inp=document.getElementById(id);
  inp.type=inp.type==='password'?'text':'password';
  btn.textContent=inp.type==='password'?'üëÅ':'üôà';
}

/* DEMO FILL */
function fillDemo(email,pw){
  document.getElementById('email').value=email;
  document.getElementById('password').value=pw;
}

/* Demo accounts ‚Äî in PHP questo viene da DB + password_verify() */
const accounts = {
  'user@demo.it':    { role:'user',        roleLabel:'Utente',        avatar:'üë§', name:'Mario Rossi' },
  'ricerca@demo.it': { role:'ricercatore', roleLabel:'Ricercatore ‚úì', avatar:'üî¨', name:'Dr. Bianchi F.' },
  'admin@demo.it':   { role:'admin',       roleLabel:'Amministratore',avatar:'‚öôÔ∏è', name:'Admin NetSea' },
};

/* LOGIN */
function handleLogin(e) {
  e.preventDefault();
  // Reset errors
  document.querySelectorAll('.field-error').forEach(el=>el.style.display='none');
  document.querySelectorAll('input').forEach(el=>el.classList.remove('err'));

  const email=document.getElementById('email').value.trim();
  const pw=document.getElementById('password').value;
  let valid=true;

  if(!email){document.getElementById('err-email').style.display='block';document.getElementById('email').classList.add('err');valid=false;}
  if(!pw){document.getElementById('err-password').style.display='block';document.getElementById('password').classList.add('err');valid=false;}
  if(!valid)return;

  // Loading state
  const btn=document.getElementById('submitBtn');
  document.getElementById('btnText').textContent='Accesso in corso‚Ä¶';
  document.getElementById('spinner').style.display='block';
  btn.classList.add('loading');

  setTimeout(()=>{
    const acc=accounts[email];
    if(acc && pw==='demo'){
      // Save session
      sessionStorage.setItem('netsea_user', JSON.stringify(acc));
      document.getElementById('alertErr').style.display='none';
      document.getElementById('alertOk').style.display='block';
      setTimeout(()=>{ location.href='index.php'; },900);
    } else {
      document.getElementById('alertErr').style.display='block';
      document.getElementById('btnText').textContent='Accedi';
      document.getElementById('spinner').style.display='none';
      btn.classList.remove('loading');
      document.getElementById('email').classList.add('err');
      document.getElementById('password').classList.add('err');
    }
  },700);
}
</script>
</body>
</html>
